<footer class="pt-5 pb-2">
    <div class="container">
        <div class="row mb-5">
            <div class="col-lg-4 mb-4 mb-lg-0">
                <a class="footer-brand" href="/">
                    <i class="fas fa-heartbeat me-2"></i>MediConnect
                </a>
                <p class="text-muted">
                    Advanced telemedicine platform connecting you with the best healthcare professionals worldwide.
                </p>
                <div class="d-flex gap-3 mt-3">
                    <a href="javascript:void(0)" onclick="showSocialPopup()" class="text-secondary fs-5"><i
                            class="fab fa-twitter"></i></a>
                    <a href="javascript:void(0)" onclick="showSocialPopup()" class="text-secondary fs-5"><i
                            class="fab fa-facebook"></i></a>
                    <a href="javascript:void(0)" onclick="showSocialPopup()" class="text-secondary fs-5"><i
                            class="fab fa-linkedin"></i></a>
                    <a href="javascript:void(0)" onclick="showSocialPopup()" class="text-secondary fs-5"><i
                            class="fab fa-instagram"></i></a>
                </div>
            </div>
            <div class="col-6 col-lg-2 mb-4">
                <h6 class="fw-bold mb-3">Platform</h6>
                <ul class="list-unstyled text-muted small">
                    <li class="mb-2"><a href="/doctors" class="text-decoration-none text-muted">Find Doctors</a></li>
                    <li class="mb-2"><a href="/doctors" class="text-decoration-none text-muted">Book Appointment</a>
                    </li>
                    <li class="mb-2"><a href="/doctors" class="text-decoration-none text-muted">Consultation</a></li>
                </ul>
            </div>
            <div class="col-6 col-lg-2 mb-4">
                <h6 class="fw-bold mb-3">Company</h6>
                <ul class="list-unstyled text-muted small">
                    <li class="mb-2"><a href="javascript:void(0)" onclick="showCompanyInfo('about')"
                            class="text-decoration-none text-muted">About Us</a></li>
                    <li class="mb-2"><a href="javascript:void(0)" onclick="showCompanyInfo('careers')"
                            class="text-decoration-none text-muted">Careers</a></li>
                    <li class="mb-2"><a href="javascript:void(0)" onclick="showCompanyInfo('privacy')"
                            class="text-decoration-none text-muted">Privacy Policy</a></li>
                    <li class="mb-2"><a href="javascript:void(0)" onclick="showCompanyInfo('terms')"
                            class="text-decoration-none text-muted">Terms of Service</a></li>
                </ul>
            </div>
            <div class="col-lg-4">
                <h6 class="fw-bold mb-3">Newsletter</h6>
                <p class="text-muted small">Subscribe to get the latest health tips and updates.</p>
                <form class="input-group mb-3" onsubmit="handleNewsletter(event)">
                    <input type="email" class="form-control" placeholder="Your Email" required>
                    <button class="btn btn-primary" type="submit">Subscribe</button>
                </form>
            </div>
        </div>
        <hr class="opacity-10">
        <div class="text-center text-muted small">
            &copy; <%= new Date().getFullYear() %> MediConnect Platform. All rights reserved.
        </div>
    </div>
</footer>

<!-- Chatbot for Patients -->
<% if (locals.user && locals.user.role==='patient' && !locals.isHome) { %>
    <%- include('chatbot') %>
        <!-- OmniDimension AI Assistant -->
        <script id="omnidimension-web-widget" async
            src="https://omnidim.io/web_widget.js?secret_key=0c54784fe1c404b442dee8b28d5774b2"></script>
        <% } %>

            <!-- Top Right Utilities (Notifications, Language, Theme, Profile) -->
            <%- include('top_utilities') %>

                <script>
                    document.addEventListener('DOMContentLoaded', function () {
                        // === 1. Global Theme Toggle ===
                        const themeBtn = document.getElementById('util-theme-btn');
                        const themeIcon = document.getElementById('theme-icon');
                        let isDark = localStorage.getItem('theme') === 'dark';

                        // Apply initial theme
                        if (isDark) {
                            document.documentElement.setAttribute('data-bs-theme', 'dark');
                            if (themeIcon) {
                                themeIcon.classList.remove('fa-sun', 'text-warning');
                                themeIcon.classList.add('fa-moon', 'text-white');
                            }
                        } else {
                            document.documentElement.removeAttribute('data-bs-theme');
                        }

                        if (themeBtn) {
                            themeBtn.addEventListener('click', () => {
                                isDark = !isDark;
                                // Animation
                                if (themeIcon) {
                                    themeIcon.style.transform = 'rotate(360deg)';
                                    setTimeout(() => themeIcon.style.transform = 'rotate(0deg)', 500);
                                }

                                if (isDark) {
                                    document.documentElement.setAttribute('data-bs-theme', 'dark');
                                    localStorage.setItem('theme', 'dark');
                                    if (themeIcon) {
                                        themeIcon.classList.remove('fa-sun', 'text-warning');
                                        themeIcon.classList.add('fa-moon', 'text-white');
                                    }
                                } else {
                                    document.documentElement.removeAttribute('data-bs-theme');
                                    localStorage.setItem('theme', 'light');
                                    if (themeIcon) {
                                        themeIcon.classList.remove('fa-moon', 'text-white');
                                        themeIcon.classList.add('fa-sun', 'text-warning');
                                    }
                                }
                            });
                        }
                    });
                </script>

                <!-- Scripts -->
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> <!-- SweetAlert2 -->
                <script src="/socket.io/socket.io.js"></script>
                <script src="/js/main.js"></script>

                <!-- Flash Messages via SweetAlert2 & Footer Logic -->
                <script>
                    document.addEventListener('DOMContentLoaded', function () {
        <% if (locals.success_msg && locals.success_msg.length > 0) { %>
                            Swal.fire({
                                icon: 'success',
                                title: 'Success!',
                                text: '<%= locals.success_msg %>',
                                confirmButtonColor: '#2563EB'
                            });
        <% } %>

        <% if (locals.error_msg && locals.error_msg.length > 0) { %>
                            Swal.fire({
                                icon: 'error',
                                title: 'Oops...',
                                text: '<%= locals.error_msg %>',
                                confirmButtonColor: '#2563EB'
                            });
        <% } %>

        <% if (locals.error && locals.error.length > 0) { %>
                            Swal.fire({
                                icon: 'error',
                                title: 'Error',
                                text: '<%= locals.error %>',
                                confirmButtonColor: '#2563EB'
                            });
        <% } %>
    });

                    // Footer Interactivity
                    function showSocialPopup() {
                        Swal.fire({
                            title: 'Stay Tuned!',
                            text: 'We will be available for connecting soon ...',
                            icon: 'info',
                            confirmButtonColor: '#2563EB'
                        });
                    }

                    function showCompanyInfo(type) {
                        let title = '';
                        let text = '';

                        switch (type) {
                            case 'about':
                                title = 'About Us';
                                text = 'MediConnect is dedicated to bridging the gap between patients and healthcare providers through secure, high-quality virtual consultations. Our mission is to make healthcare accessible to everyone, everywhere.';
                                break;
                            case 'careers':
                                title = 'Careers';
                                text = 'Join our growing team! We are looking for passionate developers, doctors, and support staff. Send your resume to careers@medibot.com to start your journey with us.';
                                break;
                            case 'privacy':
                                title = 'Privacy Policy';
                                text = 'We value your privacy. All your medical data and personal information are encrypted and complying with HIPAA and GDPR standards. We never share your data without your consent.';
                                break;
                            case 'terms':
                                title = 'Terms of Service';
                                text = 'By using our platform, you agree to treat all users with respect. Appointments must be cancelled at least 24 hours in advance. For full terms, please visit our legal office.';
                                break;
                        }

                        Swal.fire({
                            title: title,
                            text: text,
                            icon: 'info',
                            confirmButtonColor: '#2563EB',
                            customClass: {
                                popup: 'rounded-4 shadow'
                            }
                        });
                    }

                    function handleNewsletter(event) {
                        event.preventDefault(); // Prevent reload
                        const emailInput = event.target.querySelector('input[type="email"]');
                        const email = emailInput.value;
                        if (email) {
                            Swal.fire({
                                title: 'Subscribed!',
                                text: `Thanks for subscribing! You will now receive the latest health tips and platform updates directly to ${email}.`,
                                icon: 'success',
                                confirmButtonColor: '#2563EB'
                            });
                            emailInput.value = ''; // Clear input
                        }
                    }
                </script>
                </body>

                </html>